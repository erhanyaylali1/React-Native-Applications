var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _react=_interopRequireWildcard(require("react"));var _classnames2=_interopRequireDefault(require("classnames"));var _jsxFileName="/Users/linji/Documents/workspace/zarm/zarm/components/progress/index.tsx";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var Progress=function(_PureComponent){(0,_inherits2.default)(Progress,_PureComponent);var _super=_createSuper(Progress);function Progress(props){var _this;(0,_classCallCheck2.default)(this,Progress);_this=_super.call(this,props);_this.state={svgStrokeWidth:_this.strokeWidth};return _this;}(0,_createClass2.default)(Progress,[{key:"componentDidMount",value:function componentDidMount(){if(this.useSVG){this.resetSVGStrokeWidth();}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var props=this.props;if(prevProps.strokeWidth!==props.strokeWidth){this.resetSVGStrokeWidth();}}},{key:"useSVG",get:function get(){var props=this.props;return props.shape==='semi-circle'||props.shape==='circle';}},{key:"strokeWidth",get:function get(){var _this$props=this.props,strokeWidth=_this$props.strokeWidth,size=_this$props.size;var strokeWeights=Progress.strokeWeights;var backup=strokeWeights[size&&size in strokeWeights?size:'md'];return Math.max(1,strokeWidth||backup);}},{key:"resetSVGStrokeWidth",value:function resetSVGStrokeWidth(){var baseWidth=32;var clientWidth=this.progressElement.clientWidth;this.setState({svgStrokeWidth:baseWidth/clientWidth*this.strokeWidth});}},{key:"render",value:function render(){var _classnames,_this2=this;var _this$props2=this.props,theme=_this$props2.theme,percent=_this$props2.percent,strokeShape=_this$props2.strokeShape,shape=_this$props2.shape,size=_this$props2.size,style=_this$props2.style,prefixCls=_this$props2.prefixCls,className=_this$props2.className,children=_this$props2.children,format=_this$props2.text;var state=this.state;var strokeWidth=this.useSVG?state.svgStrokeWidth:this.strokeWidth;var hasKnownSize=size&&size in Progress.strokeWeights;var cls=(0,_classnames2.default)(prefixCls,className,(_classnames={},(0,_defineProperty2.default)(_classnames,prefixCls+"--"+shape,!!shape),(0,_defineProperty2.default)(_classnames,prefixCls+"--"+theme,!!theme),(0,_defineProperty2.default)(_classnames,prefixCls+"--"+size,hasKnownSize),_classnames));var sizeStyle={};if(!hasKnownSize){sizeStyle.width=size;if(shape==='circle'){sizeStyle.height=size;}if(shape==='semi-circle'){if(typeof size==='number'){sizeStyle.height=size/2+"px";}else if(typeof size==='string'){sizeStyle.height=size.replace(/^(\d+)(.+)$/,function(){return parseFloat(arguments.length<=1?undefined:arguments[1])/2+(arguments.length<=2?undefined:arguments[2]);});}}}var diameter=32;var radius=diameter/2;var extendRadius=radius+strokeWidth/2;var strokeLinecap=strokeShape==='round'?'round':'butt';var viewBox=shape==='circle'?"0 0 "+(diameter+strokeWidth)+" "+(diameter+strokeWidth):"0 0 "+(diameter+strokeWidth)+" "+(diameter+strokeWidth)/2;var path=shape==='circle'?"\n        M"+extendRadius+", "+extendRadius+"\n        m0 "+-radius+"\n        a"+radius+" "+radius+" 0 1 1 0 "+diameter+"\n        a"+radius+" "+radius+" 0 1 1 0 "+-diameter:"\n        M"+extendRadius+", "+extendRadius+"\n        m"+-radius+" 0\n        a"+radius+" "+radius+" 0 0 1 "+diameter+" 0";var dasharray=shape==='circle'?Math.PI*diameter:Math.PI*diameter/2;var borderRadius=strokeShape==='round'?this.strokeWidth+"px":'0';var lineTrackStyle={height:""+strokeWidth,borderRadius:borderRadius};var lineThumbStyle={width:percent+"%",height:strokeWidth+"px",borderRadius:borderRadius};var formattedPercent=format?format(percent||0):null;var hasIndicator=children||formattedPercent;var roundInner=(shape==='circle'||shape==='semi-circle')&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("svg",{viewBox:viewBox,__self:this,__source:{fileName:_jsxFileName,lineNumber:140,columnNumber:9}},_react.default.createElement("path",{className:prefixCls+"__track",d:path,strokeWidth:strokeWidth,strokeLinecap:strokeLinecap,__self:this,__source:{fileName:_jsxFileName,lineNumber:141,columnNumber:11}}),_react.default.createElement("path",{className:prefixCls+"__thumb",d:path,strokeWidth:strokeWidth,strokeLinecap:strokeLinecap,strokeDasharray:dasharray,strokeDashoffset:dasharray*(100-percent)/100,__self:this,__source:{fileName:_jsxFileName,lineNumber:147,columnNumber:11}})),hasIndicator&&_react.default.createElement("div",{className:prefixCls+"__text",__self:this,__source:{fileName:_jsxFileName,lineNumber:156,columnNumber:26}},children||formattedPercent));var rectInner=shape==='line'&&_react.default.createElement("div",{className:prefixCls+"__outer",__self:this,__source:{fileName:_jsxFileName,lineNumber:161,columnNumber:7}},_react.default.createElement("div",{className:prefixCls+"__track",style:lineTrackStyle,__self:this,__source:{fileName:_jsxFileName,lineNumber:162,columnNumber:9}},_react.default.createElement("div",{className:prefixCls+"__thumb",style:lineThumbStyle,__self:this,__source:{fileName:_jsxFileName,lineNumber:163,columnNumber:11}})),hasIndicator&&_react.default.createElement("div",{className:prefixCls+"__text",__self:this,__source:{fileName:_jsxFileName,lineNumber:165,columnNumber:26}},children||formattedPercent));return _react.default.createElement("div",{className:cls,style:(0,_extends2.default)({},sizeStyle,style),ref:function ref(ele){_this2.progressElement=ele;},__self:this,__source:{fileName:_jsxFileName,lineNumber:170,columnNumber:7}},shape==='line'?rectInner:roundInner);}}]);return Progress;}(_react.PureComponent);exports.default=Progress;Progress.defaultProps={prefixCls:'za-progress',theme:'primary',shape:'line',size:'md',percent:0,strokeShape:'round',text:function text(percent){return percent+"%";}};Progress.strokeWeights={lg:10,md:8,sm:4};